# Mantainer: jonathan.nerat@gmail.com
_pkgname=neovim
pkgname=${_pkgname}-git
pkgver=nightly.r0.4a996bc43
pkgrel=1
pkgdesc='Nightly build of Neovim'
arch=('i686' 'x86_64')
url='https://github.com/neovim/neovim'
license=('Apache')
makedepends=('gcc' 'cmake' 'unzip' 'ninja')
provides=('neovim')
conflicts=('neovim')
source=('git+https://github.com/neovim/neovim.git')
md5sums=('SKIP')

pkgver() {
	cd "$srcdir/$_pkgname"
	printf "%s" "$(git describe --long --tags | sed 's/\([^-]*-\)g/r\1/;s/-/./g')"
}

build() {
	make -C "$srcdir/$_pkgname" CMAKE_BUILD_TYPE=RelWithDebInfo
}

package() {
	cd "$srcdir/$_pkgname"
	mkdir -p "$pkgdir/usr/local"
	make CMAKE_INSTALL_PREFIX="$pkgdir/usr/local" install
}
